webpackJsonp([6],{"+DPx":function(t,e){},puCd:function(t,e,i){"use strict";(function(t){var r=i("mvHQ"),a=i.n(r),o=i("bOdI"),s=i.n(o),n=i("yBSu").a.dictionary;e.a={data:function(){var t;return t={isFirstEnter:!1,slider:.5,sliderShow:!1,loading:!1,formIndex:0,selectForm:{},formList:[],activeName:"first"},s()(t,"loading",!1),s()(t,"pageData",[]),s()(t,"fileList",[]),s()(t,"selectFormUrl",""),s()(t,"lxUrl",""),s()(t,"lcUrl",""),t},beforeRouteEnter:function(t,e,i){"DoSubmit"==e.name&&(t.meta.isBack=!0),i()},activated:function(){var e=this.$route.params.type;if(this.$GetWxUserInfo(this.$route),"sj"==n[e].region&&this.$GetSjUserInfo(this.$UserInfo.mobile),0==this.$UserInfo.userId)return t("#app").hide(0),layer.alert("数据库中不存在当前用户信息、请咨询相关人员！"),!1;if(!this.$route.meta.isBack||this.isFirstEnter){this.$wx;this.activeName="first",this.getAllPgeData()}this.loading=!0;var i=this;setTimeout(function(){i.loading=!1},4e3),this.$route.meta.isBack=!1,this.isFirstEnter=!1},created:function(){this.slider=.5,this.isFirstEnter=!0},methods:{getSelectFormUrl:function(){var e=this.selectForm;if("gwbl"==this.$route.params.type){var i="http://218.94.36.101:8888/JnfjWebService/HtmlPage/HtmlMainPage.aspx?iid="+e.iid+"&FormName="+e.res_value+"&UserId="+e.userid+"&input_index="+e.input_index+"&rtid="+e.rtid+"&wiid="+e.wiid+"&indexfield=iid&indexvalue="+e.iid+"&t="+Math.random();this.selectFormUrl=i}else{i="http://218.94.36.101:8888/netows2_jjg/HtmlPage/HtmlMainPage.aspx?iid="+e.iid+"&FormName="+e.res_value+"&UserId="+e.userid+"&input_index="+e.input_index+"&rtid="+e.rtid+"&wiid="+e.wiid+"&indexfield=iid&indexvalue="+e.iid+"&t="+Math.random();this.selectFormUrl=i}t("#myformiframe").attr("src")!=this.selectFormUrl&&t("#myformiframe").attr("src",this.selectFormUrl)},getLxUrl:function(){var t=this.$route.params.iid;if("gwbl"==this.$route.params.type){var e="http://218.94.36.101:8888/JnfjWebService/UserApplication/workflow/WorkItemDetails.aspx?iid="+t;this.lxUrl=e}},getLcUrl:function(){var t=this.$route.params.iid;if("gwbl"==this.$route.params.type){var e="http://218.94.36.101:8888/JnfjWebService/htmlpage/ViewWorkflowProcess.aspx?iid="+t+"&sctlid=&ectlid=";this.lcUrl=e}else{e="http://218.94.36.101:8888/netows2_jjg/htmlpage/ViewWorkflowProcess.aspx?iid="+t+"&sctlid=&ectlid=";this.lcUrl=e}},getAllPgeData:function(){var t=this.$MyGlobal,e=this;e.loading=!0;var i=function(t){var i=JSON.parse(t);if(e.pageData=i,i.length<=0)return layer.msg("该案件存在异常！",function(t){e.$router.go(-1)}),!1;e.formList=i.filter(function(t){return"3"==t.type}),e.fileList=i.filter(function(t){return"2"==t.type}),e.selectForm=e.formList[0],e.getSelectFormUrl(),e.getLcUrl(),e.getLxUrl()},r=function(t){console.log(t),e.loading=!1},a=[e.$UserInfo.userId,e.$route.params.wiid,"order by sort;text"];"sjgwbl"==e.$route.params.type?t.GetDataWebServiceNJSJ("NetOffice.DoWorkHandle","GetResourceTree",a.join(","),i,r):t.GetDataWebService("NetOffice.DoWorkHandle","GetResourceTree",a.join(","),i,r)},triggerForm:function(t){console.log(this.formIndex),this.formIndex+t>=0&&this.formIndex+t<this.formList.length&&(this.formIndex+=t,this.selectForm=this.formList[this.formIndex],this.slider=.5,this.getSelectFormUrl())},downFile:function(t){var e=this.$MyGlobal,i=this,r={type:["attachment a","dynamic_resource b"],pageNum:1,PageMax:1,fileds:"replace(substr(a.ftp_path,instr(a.ftp_path,'@',1,2)+1),'\\','/') as path",where:"a.aid=b.res_value and b.res_value='"+t.res_value+"'"},a=r.type.join(",");e.GetDataAjax("get",a,r,function(t){if(t.length>0){var e="http://218.94.36.101:8888/weixinpage/ftpfile/"+t[0].path;window.location.href=e}else layer.msg("找不到文件！")},function(t){i.loading2=!1,layer.alert("下载附件时发生异常！")})},DoSubmit:function(){var t=this.$route.params.iid,e=this.$route.params.wiid,i=this.$route.params.type;this.$router.push({name:"DoSubmit",params:{type:i,iid:t,wiid:e}})},SaveData:function(){window.frames.myformiframe.contentWindow.postMessage(a()({type:"saveform"}),"*")},SliderChange:function(t){var e={type:"slider",data:{SliderValue:t}};window.frames.myformiframe.contentWindow.postMessage(a()(e),"*")}}}}).call(e,i("7t+N"))},xTAb:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=i("puCd"),a={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{directives:[{name:"loading",rawName:"v-loading.lock",value:t.loading,expression:"loading",modifiers:{lock:!0}}],staticClass:"viewbody",staticStyle:{position:"relative"},attrs:{"element-loading-text":"拼命加载中","element-loading-spinner":"el-icon-loading","element-loading-background":"rgba(0, 0, 0, 0.8)"}},[i("el-tabs",{staticStyle:{width:"96%",margin:"0 auto",position:"relative",height:"92%"},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[i("el-tab-pane",{attrs:{label:"公文表单",name:"first"}},[i("el-main",{staticClass:"my-tab-panel-content"},[i("div",{staticClass:"my-tab-panel-body"},[i("div",{staticStyle:{position:"absolute",top:"5px",left:"0px","z-index":"1"}},t._l(t.formList,function(e,r){return t.formList&&t.formList.length>1?i("div",[0==r?i("el-button",{attrs:{size:"mini",icon:"el-icon-caret-top",circle:""},on:{click:function(e){t.triggerForm(-1)}}}):t._e(),t._v(" "),1==r?i("el-button",{attrs:{size:"mini",icon:"el-icon-caret-bottom",circle:""},on:{click:function(e){t.triggerForm(1)}}}):t._e()],1):t._e()})),t._v(" "),i("iframe",{staticStyle:{width:"100%",display:"block",margin:"0 auto",border:"none",height:"100%","-webkit-overflow-scrolling":"touch",overflow:"auto","/* 提示":"请在此处加上需要设置的大小(dimensions)或位置(positioning)信息! */"},attrs:{id:"myformiframe",onload:"var data = {type:'slider',data: { SliderValue:0.5 }};window.frames['myformiframe'].contentWindow.postMessage(JSON.stringify(data), '*');"}}),t._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:t.sliderShow,expression:"sliderShow"}],staticStyle:{position:"absolute",top:"10px",bottom:"60px",right:"5px","z-index":"1"}},[i("el-slider",{staticStyle:{height:"100%"},attrs:{max:1,step:.01,size:"mini",vertical:""},on:{change:t.SliderChange},model:{value:t.slider,callback:function(e){t.slider=e},expression:"slider"}})],1),t._v(" "),i("div",{staticStyle:{position:"absolute",bottom:"15px",right:"10px","z-index":"1"}},[i("el-button",{attrs:{type:"primary",size:"mini",icon:"el-icon-setting",circle:""},on:{click:function(e){t.sliderShow=!t.sliderShow}}})],1)])])],1),t._v(" "),i("el-tab-pane",{attrs:{label:"附件管理",name:"second"}},[i("el-table",{ref:"fileList",staticStyle:{width:"100%"},attrs:{data:t.fileList,size:"mini"}},[i("el-table-column",{attrs:{"show-overflow-tooltip":"",prop:"text",label:"附件名"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("div",{staticStyle:{"word-break":"break-all","word-wrap":"break-word"},on:{click:function(i){t.downFile(e.row)}}},[i("i",{staticClass:"el-icon-document",staticStyle:{color:"goldenrod"}}),t._v(" "),i("span",{staticStyle:{"margin-left":"10px","white-space":"normal"}},[t._v(t._s(e.row.text+e.row.icon))])])]}}])})],1)],1)],1),t._v(" "),i("div",{staticStyle:{position:"fixed",bottom:"5px",width:"100%"}},[i("el-row",{staticStyle:{"text-align":"center"}},[i("el-col",{attrs:{span:24}},[i("el-button-group",{attrs:{id:"handlebtnGroup"}},[i("el-button",{attrs:{type:"success",size:"small",icon:"el-icon-upload"},on:{click:t.SaveData}},[t._v("保存")]),t._v(" "),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.DoSubmit}},[t._v("\n            提交\n            "),i("i",{staticClass:"el-icon-success el-icon--right"})])],1)],1)],1)],1)],1)},staticRenderFns:[]};var o=function(t){i("+DPx")},s=i("VU/8")(r.a,a,!1,o,null,null);e.default=s.exports}});
//# sourceMappingURL=6.ccc0de16563efaa75fd1.js.map