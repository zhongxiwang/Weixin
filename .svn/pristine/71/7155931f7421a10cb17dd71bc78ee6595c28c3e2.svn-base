{"version":3,"sources":["webpack:///src/views/WorkSearch.vue","webpack:///./src/views/WorkSearch.vue?7b97","webpack:///./src/views/WorkSearch.vue"],"names":["__webpack_exports__","data","isFirstEnter","wnameList","form","name","wname","date1","date2","status","beforeRouteEnter","to","from","next","meta","isBack","activated","this","$route","getWnameList","created","$","html","layer","closeAll","methods","MyGlobal","$MyGlobal","that","AjaxData","type","pageNum","PageMax","fileds","where","desc","filed","urlAfter","join","GetDataAjax","result","length","i","push","err","loading","alert","onSubmit","params","$router","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default","resetForm","formName","$refs","resetFields","views_WorkSearch","render","_vm","_h","$createElement","_c","_self","staticClass","staticStyle","margin","attrs","slot","text-align","font-size","_v","ref","model","label-position","label","prop","placeholder","value","callback","$$v","$set","expression","_l","item","index","key","span","width","editable","value-format","icon","on","click","$event","staticRenderFns","__vue_styles__","ssrContext","__webpack_require__","Component","normalizeComponent","WorkSearch"],"mappings":"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","file":"static/js/4.24bef3d80419efac5af2.js","sourcesContent":["<template>\r\n    <el-card class=\"box-card\">\r\n        <div slot=\"header\" class=\"clearfix\" style=\"margin: -9px 0px;\">\r\n            <div style=\"text-align: center;font-size: 1.6rem;\">公文查询</div>\r\n        </div>\r\n        <div>\r\n            <el-form ref=\"form\" :model=\"form\" :label-position=\"'top'\">\r\n                <el-form-item label=\"公文名称\" prop=\"name\">\r\n                    <el-input v-model=\"form.name\" placeholder=\"请填写公文名称\"></el-input>\r\n                </el-form-item>\r\n                <el-form-item label=\"公文类型\" prop=\"wname\">\r\n                    <el-select v-model=\"form.wname\" placeholder=\"请选择公文类型\">\r\n                        <el-option label=\"全部\" value=\"\"></el-option>\r\n                        <el-option v-for=\"(item,index) in wnameList\" :key=\"item.wname\" :label=\"item.wname\" :value=\"item.wname\"></el-option>\r\n                    </el-select>\r\n                </el-form-item>\r\n                <el-form-item label=\"创建时间\">\r\n                    <el-col :span=\"24\">\r\n                        <el-form-item prop=\"date1\">\r\n                            <el-date-picker type=\"date\" :editable=\"false\" placeholder=\"起始时间\" v-model=\"form.date1\" value-format=\"yyyy-MM-dd\" style=\"width: 100%;\"></el-date-picker>\r\n                        </el-form-item>\r\n                    </el-col>\r\n                    <el-col class=\"line\" :span=\"24\">至</el-col>\r\n                    <el-col :span=\"24\">\r\n                        <el-form-item prop=\"date2\">\r\n                            <el-date-picker type=\"date\" :editable=\"false\" placeholder=\"截至时间\" v-model=\"form.date2\" value-format=\"yyyy-MM-dd\" style=\"width: 100%;\"></el-date-picker>\r\n                        </el-form-item>\r\n                    </el-col>\r\n                </el-form-item>\r\n                <el-form-item label=\"当前状态\" prop=\"status\">\r\n                    <el-checkbox-group v-model=\"form.status\">\r\n                        <el-checkbox label=\"0','1\" name=\"status\">在办</el-checkbox>\r\n                        <el-checkbox label=\"2\" name=\"status\">办结</el-checkbox>\r\n                        <el-checkbox label=\"-2\" name=\"status\">退案</el-checkbox>\r\n                    </el-checkbox-group>\r\n                </el-form-item>\r\n                <el-form-item>\r\n                    <el-button type=\"primary\" icon=\"el-icon-search\" @click=\"onSubmit\">查询</el-button>\r\n                    <el-button @click=\"resetForm('form')\">重置</el-button>\r\n                </el-form-item>\r\n            </el-form>\r\n        </div>\r\n    </el-card>\r\n</template>\r\n\r\n<script>\r\n    export default {\r\n        data() {\r\n            return {\r\n                isFirstEnter: false, // 是否第一次进入，默认false\r\n                wnameList: [],\r\n                form: {\r\n                    name: '',\r\n                    wname: '',\r\n                    date1: '',\r\n                    date2: '',\r\n                    status: [],\r\n                }\r\n            }\r\n        },\r\n        beforeRouteEnter(to, from, next) {\r\n            // 路由导航钩子，此时还不能获取组件实例 `this`，所以无法在data中定义变量（利用vm除外）\r\n            if (from.name == \"WorkViewList\") {\r\n                to.meta.isBack = true;\r\n                //判断是从哪个路由过来的，\r\n                //如果是page2过来的，表明当前页面不需要刷新获取新数据，直接用之前缓存的数据即可\r\n            }\r\n            next();\r\n        },\r\n        activated() {\r\n            // 如果isBack是false，表明需要获取新数据，否则就不再请求，直接使用缓存的数据\r\n            if (!this.$route.meta.isBack || this.isFirstEnter) {\r\n                let that = this;\r\n\r\n                this.getWnameList();\r\n            }\r\n\r\n            // 恢复成默认的false，避免isBack一直是true，导致下次无法获取数据\r\n            this.$route.meta.isBack = false;\r\n            // 恢复成默认的false，避免isBack一直是true，导致每次都获取新数据\r\n            this.isFirstEnter = false;\r\n        },\r\n        created() {\r\n            this.isFirstEnter = true;\r\n            // 只有第一次进入或者刷新页面后才会执行此钩子函数\r\n            // 使用keep-alive后（2+次）进入不会再执行此钩子函数\r\n            $(\"#title\").html('公文查询');\r\n            layer.closeAll();\r\n        },\r\n        methods: {\r\n            getWnameList() {\r\n                let MyGlobal = this.$MyGlobal;\r\n                let that = this;\r\n\r\n                var AjaxData = {\r\n                    type: [\"workflow_define d\"],\r\n                    pageNum: 1,\r\n                    PageMax: 1000,\r\n                    fileds: \"d.flowname as wname\",\r\n                    where: \"d.flowtype='公文'\",\r\n                    desc: true,\r\n                    filed: \"d.flowname\"\r\n                };\r\n                var urlAfter = AjaxData.type.join(\",\");\r\n                var success = function (result) {\r\n                    if (result.length > 0) {\r\n                        for (let i = 0; i < result.length; i++) {\r\n                            that.wnameList.push(result[i]);\r\n                        }\r\n                    }\r\n                };\r\n                var error = function (err) {\r\n                    that.loading = false;\r\n                    layer.alert(\"获取所有公文类型流程发生异常！\");\r\n                }\r\n\r\n                MyGlobal.GetDataAjax(\"get\", urlAfter, AjaxData, success, error);\r\n            },\r\n            onSubmit() {\r\n                let that = this;\r\n\r\n                var type = that.$route.params.type;\r\n                this.$router.push({\r\n                    name: \"WorkViewList\",\r\n                    params: {\r\n                        type: type,\r\n                        where: JSON.stringify(that.form)\r\n                    },\r\n                });\r\n            },\r\n            resetForm(formName) {\r\n                this.$refs[formName].resetFields();\r\n            }\r\n        }\r\n    }\r\n</script>\r\n\r\n<style scoped>\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/WorkSearch.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('el-card',{staticClass:\"box-card\"},[_c('div',{staticClass:\"clearfix\",staticStyle:{\"margin\":\"-9px 0px\"},attrs:{\"slot\":\"header\"},slot:\"header\"},[_c('div',{staticStyle:{\"text-align\":\"center\",\"font-size\":\"1.6rem\"}},[_vm._v(\"公文查询\")])]),_vm._v(\" \"),_c('div',[_c('el-form',{ref:\"form\",attrs:{\"model\":_vm.form,\"label-position\":'top'}},[_c('el-form-item',{attrs:{\"label\":\"公文名称\",\"prop\":\"name\"}},[_c('el-input',{attrs:{\"placeholder\":\"请填写公文名称\"},model:{value:(_vm.form.name),callback:function ($$v) {_vm.$set(_vm.form, \"name\", $$v)},expression:\"form.name\"}})],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"公文类型\",\"prop\":\"wname\"}},[_c('el-select',{attrs:{\"placeholder\":\"请选择公文类型\"},model:{value:(_vm.form.wname),callback:function ($$v) {_vm.$set(_vm.form, \"wname\", $$v)},expression:\"form.wname\"}},[_c('el-option',{attrs:{\"label\":\"全部\",\"value\":\"\"}}),_vm._v(\" \"),_vm._l((_vm.wnameList),function(item,index){return _c('el-option',{key:item.wname,attrs:{\"label\":item.wname,\"value\":item.wname}})})],2)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"创建时间\"}},[_c('el-col',{attrs:{\"span\":24}},[_c('el-form-item',{attrs:{\"prop\":\"date1\"}},[_c('el-date-picker',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"date\",\"editable\":false,\"placeholder\":\"起始时间\",\"value-format\":\"yyyy-MM-dd\"},model:{value:(_vm.form.date1),callback:function ($$v) {_vm.$set(_vm.form, \"date1\", $$v)},expression:\"form.date1\"}})],1)],1),_vm._v(\" \"),_c('el-col',{staticClass:\"line\",attrs:{\"span\":24}},[_vm._v(\"至\")]),_vm._v(\" \"),_c('el-col',{attrs:{\"span\":24}},[_c('el-form-item',{attrs:{\"prop\":\"date2\"}},[_c('el-date-picker',{staticStyle:{\"width\":\"100%\"},attrs:{\"type\":\"date\",\"editable\":false,\"placeholder\":\"截至时间\",\"value-format\":\"yyyy-MM-dd\"},model:{value:(_vm.form.date2),callback:function ($$v) {_vm.$set(_vm.form, \"date2\", $$v)},expression:\"form.date2\"}})],1)],1)],1),_vm._v(\" \"),_c('el-form-item',{attrs:{\"label\":\"当前状态\",\"prop\":\"status\"}},[_c('el-checkbox-group',{model:{value:(_vm.form.status),callback:function ($$v) {_vm.$set(_vm.form, \"status\", $$v)},expression:\"form.status\"}},[_c('el-checkbox',{attrs:{\"label\":\"0','1\",\"name\":\"status\"}},[_vm._v(\"在办\")]),_vm._v(\" \"),_c('el-checkbox',{attrs:{\"label\":\"2\",\"name\":\"status\"}},[_vm._v(\"办结\")]),_vm._v(\" \"),_c('el-checkbox',{attrs:{\"label\":\"-2\",\"name\":\"status\"}},[_vm._v(\"退案\")])],1)],1),_vm._v(\" \"),_c('el-form-item',[_c('el-button',{attrs:{\"type\":\"primary\",\"icon\":\"el-icon-search\"},on:{\"click\":_vm.onSubmit}},[_vm._v(\"查询\")]),_vm._v(\" \"),_c('el-button',{on:{\"click\":function($event){_vm.resetForm('form')}}},[_vm._v(\"重置\")])],1)],1)],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4fcf9f5a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/WorkSearch.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4fcf9f5a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./WorkSearch.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./WorkSearch.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./WorkSearch.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4fcf9f5a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./WorkSearch.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4fcf9f5a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/WorkSearch.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}