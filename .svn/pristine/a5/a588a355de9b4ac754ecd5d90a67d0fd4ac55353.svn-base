{"version":3,"sources":["webpack:///src/views/WorkList.vue","webpack:///./src/views/WorkList.vue?fc1f","webpack:///./src/views/WorkList.vue"],"names":["dictionary","__webpack_exports__","name","data","isFirstEnter","loading","pageNum","PageMax","value","sw","beforeRouteEnter","to","from","next","meta","isBack","activated","type","this","$route","params","$GetWxUserInfo","region","$GetSjUserInfo","$UserInfo","mobile","userId","$","hide","layer","alert","that","getWorkList","window","unbind","scroll","e","scrollTop","scrollHeight","document","height","toLowerCase","created","html","closeAll","methods","MyGlobal","$MyGlobal","userid","whereValue","AjaxData","urlAfter","join","GetDataAjax","result","i","push","length","msg","err","getWrokListSearch","ItemClick","id","$router","iid","wiid","nwiid","step","views_WorkList","render","_vm","_h","$createElement","_c","_self","directives","rawName","expression","modifiers","lock","staticClass","attrs","element-loading-text","element-loading-spinner","element-loading-background","span","placeholder","size","prefix-icon","model","callback","$$v","slot","icon","nativeOn","click","$event","_v","_e","_l","item","index","key","gutter","staticStyle","font-size","_s","wname","text-align","_f","createtime","staticRenderFns","__vue_styles__","ssrContext","__webpack_require__","Component","normalizeComponent","WorkList"],"mappings":"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","file":"static/js/5.d9f7ddc0d80ea771e651.js","sourcesContent":["<template>\r\n    <div class=\"viewbody\" v-loading.lock=\"loading\" element-loading-text=\"拼命加载中\" element-loading-spinner=\"el-icon-loading\" element-loading-background=\"rgba(0, 0, 0, 0.8)\">\r\n        <el-row class=\"WorkList-search\">\r\n            <el-col :span=\"24\">\r\n                <div class=\"demo-input-suffix\">\r\n                    <el-input v-model=\"value\" placeholder=\"请输入标题\" class=\"input-with-select\" size=\"small\" prefix-icon=\"el-icon-search\">\r\n                        <el-button slot=\"append\" icon=\"el-icon-search\" @click.native=\"getWrokListSearch();\"></el-button>\r\n                    </el-input>\r\n                </div>\r\n            </el-col>\r\n        </el-row>\r\n        <el-row v-if=\"data.length==0\">\r\n            <el-col class=\"WorkList-Error\" :span=\"24\">无数据</el-col>\r\n        </el-row>\r\n\r\n        <el-row class=\"WorkList\" v-for=\"(item,index) in data\" :key=\"index\" @click.native=\"ItemClick(item);\">\r\n            <el-row :gutter=\"10\">\r\n                <el-col class=\"WorkList-img\" :span=\"5\">\r\n                    <div class=\"img-border\">\r\n                        <i style=\"font-size:4rem\" class=\"iconfont icon-weibiaoti1\"></i>\r\n                    </div>\r\n                </el-col>\r\n                <el-col class=\"WorkList-title\" :span=\"19\">\r\n                    {{ item.name }}\r\n                </el-col>\r\n                <el-col class=\"WorkList-info\" :span=\"24\">\r\n                    <el-row :gutter=\"30\">\r\n                        <el-col :span=\"12\">类型: {{ item.wname }}</el-col>\r\n                        <el-col :span=\"12\" style=\"text-align: right;\">{{ item.createtime | stringreplace('T',' ') }}</el-col>\r\n                    </el-row>\r\n                </el-col>\r\n            </el-row>\r\n        </el-row>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\n    import sys_dictionary from '../dictionary'\r\n    let dictionary = sys_dictionary[\"dictionary\"];\r\n    export default {\r\n        name: \"WorkList\",\r\n        data() {\r\n            return {\r\n                isFirstEnter: false, // 是否第一次进入，默认false\r\n\r\n                loading: false,\r\n                data: [],\r\n                pageNum: 1,\r\n                PageMax: 20,\r\n                value: \"\",\r\n                sw: false\r\n            };\r\n        },\r\n        beforeRouteEnter(to, from, next) {\r\n            // 路由导航钩子，此时还不能获取组件实例 `this`，所以无法在data中定义变量（利用vm除外）\r\n            if (from.name == \"WorkItem\") {\r\n                to.meta.isBack = true;\r\n                //判断是从哪个路由过来的，\r\n                //如果是page2过来的，表明当前页面不需要刷新获取新数据，直接用之前缓存的数据即可\r\n            }\r\n            next();\r\n        },\r\n        activated() {\r\n            var type = this.$route.params.type;\r\n            this.$GetWxUserInfo(this.$route);//获取用户信息\r\n            if (dictionary[type].region == \"sj\") {//如果为市局公文办理则获取时间用户表信息\r\n                this.$GetSjUserInfo(this.$UserInfo.mobile);\r\n            }\r\n            if (this.$UserInfo.userId == false) {\r\n                $(\"#app\").hide(0);\r\n                layer.alert(\"数据库中不存在当前用户信息、请咨询相关人员！\");\r\n\r\n                return false;\r\n            }\r\n\r\n            // 如果isBack是false，表明需要获取新数据，否则就不再请求，直接使用缓存的数据\r\n            if (!this.$route.meta.isBack || this.isFirstEnter) {\r\n                let that = this;\r\n\r\n                that.data = [];\r\n                that.pageNum = 1;\r\n                that.PageMax = 20;\r\n                //首次进入加载事件\r\n                this.getWorkList();\r\n                this.pageNum = 1;\r\n                if (this.pageNum == \"1\") {//首次加载数据出现加载层\r\n                    this.loading = true;\r\n                }\r\n\r\n                //滚动加载事件\r\n                $(window).unbind(\"scroll\");\r\n                $(window).scroll(function (e) {\r\n                    let scrollTop = $(this).scrollTop();\r\n                    let scrollHeight = $(document).height();\r\n                    let windowHeight = $(this).height();\r\n                    if (scrollTop + windowHeight >= scrollHeight - 350) {\r\n                        if (that.$route.name.toLowerCase() != \"worklist\") {\r\n                            return false;\r\n                        }\r\n\r\n                        if (that.sw) {\r\n                            that.sw = false;\r\n                            //this.pageNum = this.pageNum + 1;\r\n                            that.getWorkList();\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n\r\n            // 恢复成默认的false，避免isBack一直是true，导致下次无法获取数据\r\n            this.$route.meta.isBack = false;\r\n            // 恢复成默认的false，避免isBack一直是true，导致每次都获取新数据\r\n            this.isFirstEnter = false;\r\n        },\r\n        created() {\r\n            this.isFirstEnter = true;\r\n            // 只有第一次进入或者刷新页面后才会执行此钩子函数\r\n            // 使用keep-alive后（2+次）进入不会再执行此钩子函数\r\n            var type = this.$route.params.type;\r\n            $(\"#title\").html(dictionary[type][\"title\"]);\r\n            layer.closeAll();\r\n        },\r\n        methods: {\r\n            getWorkList() {\r\n                let that = this;\r\n                const MyGlobal = that.$MyGlobal;\r\n\r\n                var userid = that.$UserInfo.userId;\r\n                var type = this.$route.params.type;\r\n\r\n                var whereValue = this.value;\r\n                var AjaxData = dictionary[type].AjaxData(this.pageNum, this.PageMax, userid, whereValue);\r\n\r\n                var urlAfter = AjaxData.type.join(\",\");\r\n                var success = function (result) {\r\n                    if (that.pageNum <= 1) {\r\n                        that.data = result;\r\n                    }\r\n                    else {\r\n                        for (var i in result) {\r\n                            that.data.push(result[i]);\r\n                        }\r\n                    }\r\n\r\n                    that.pageNum += 1;\r\n                    that.loading = false;\r\n                    if (result.length > 0) {\r\n                        that.sw = true;\r\n                    }\r\n                    else {\r\n                        that.sw = false;\r\n                        layer.msg(\"无数据！\");\r\n                    }\r\n                };\r\n                var error = function (err) {\r\n                    that.loading = false;\r\n                    layer.alert(\"获取WrokList发生异常！\");\r\n                }\r\n\r\n                MyGlobal.GetDataAjax(\"get\", urlAfter, AjaxData, success, error);\r\n            },\r\n            getWrokListSearch() {\r\n                this.data = [];\r\n                this.pageNum = 1;\r\n                this.loading = true;\r\n\r\n                this.getWorkList();\r\n            },\r\n            ItemClick(data) {\r\n                var id = data.id;\r\n                var type = this.$route.params.type;\r\n                this.$router.push({\r\n                    name: \"WorkItem\",\r\n                    params: { type: type, iid: data.iid, wiid: data.wiid, nwiid: \"w\" + data.wiid, step: data.step }\r\n                });\r\n            }\r\n        }\r\n    };\r\n</script>\r\n\r\n<style>\r\n    .WorkList-search {\r\n        padding: 1rem;\r\n        border-bottom: 0.1rem solid #f1f1f1;\r\n    }\r\n\r\n    .WorkList-Error {\r\n        font-family: \"Courier New\", Courier, monospace;\r\n        text-align: center;\r\n        font-size: 1.2rem;\r\n        font-weight: 600;\r\n        color: gray;\r\n        /* height: 3rem; */\r\n        line-height: 2rem;\r\n\r\n        vertical-align: middle;\r\n        padding: 1rem 0.5rem;\r\n        border-bottom: 0.1rem solid #f1f1f1;\r\n        cursor: pointer;\r\n    }\r\n\r\n    .WorkList {\r\n        height: 10rem;\r\n        margin: 0.5rem 0rem;\r\n        padding: 1rem 0.5rem;\r\n        border-bottom: 0.1rem solid #f1f1f1;\r\n        cursor: pointer;\r\n        box-sizing: border-box;\r\n    }\r\n\r\n    /* .WorkList:hover {\r\n        background-color: #5cb85c;\r\n        color: white;\r\n      } */\r\n\r\n    .WorkList .WorkList-title {\r\n        font-size: 1.7rem;\r\n        padding-bottom: 0.5rem;\r\n        line-height: 2.2rem;\r\n        height: 4.05rem;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n        word-wrap: break-word;\r\n        word-break: break-all;\r\n        box-sizing: border-box;\r\n    }\r\n\r\n    .WorkList .WorkList-img {\r\n        height: 5rem !important;\r\n        text-align: center !important;\r\n        color: gray !important;\r\n    }\r\n\r\n    .WorkList-img>.img-border {\r\n        min-width: 5rem !important;\r\n        height: 100% !important;\r\n        /* border: 0.5px solid #f1f1f1; */\r\n    }\r\n\r\n    .WorkList .WorkList-info {\r\n        margin-top: 1rem;\r\n        font-size: 1.4rem;\r\n        color: gray;\r\n        /*height: 2.5rem;*/\r\n        line-height: 1.6rem;\r\n        overflow: hidden;\r\n        text-overflow: ellipsis;\r\n    }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/WorkList.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading.lock\",value:(_vm.loading),expression:\"loading\",modifiers:{\"lock\":true}}],staticClass:\"viewbody\",attrs:{\"element-loading-text\":\"拼命加载中\",\"element-loading-spinner\":\"el-icon-loading\",\"element-loading-background\":\"rgba(0, 0, 0, 0.8)\"}},[_c('el-row',{staticClass:\"WorkList-search\"},[_c('el-col',{attrs:{\"span\":24}},[_c('div',{staticClass:\"demo-input-suffix\"},[_c('el-input',{staticClass:\"input-with-select\",attrs:{\"placeholder\":\"请输入标题\",\"size\":\"small\",\"prefix-icon\":\"el-icon-search\"},model:{value:(_vm.value),callback:function ($$v) {_vm.value=$$v},expression:\"value\"}},[_c('el-button',{attrs:{\"slot\":\"append\",\"icon\":\"el-icon-search\"},nativeOn:{\"click\":function($event){_vm.getWrokListSearch();}},slot:\"append\"})],1)],1)])],1),_vm._v(\" \"),(_vm.data.length==0)?_c('el-row',[_c('el-col',{staticClass:\"WorkList-Error\",attrs:{\"span\":24}},[_vm._v(\"无数据\")])],1):_vm._e(),_vm._v(\" \"),_vm._l((_vm.data),function(item,index){return _c('el-row',{key:index,staticClass:\"WorkList\",nativeOn:{\"click\":function($event){_vm.ItemClick(item);}}},[_c('el-row',{attrs:{\"gutter\":10}},[_c('el-col',{staticClass:\"WorkList-img\",attrs:{\"span\":5}},[_c('div',{staticClass:\"img-border\"},[_c('i',{staticClass:\"iconfont icon-weibiaoti1\",staticStyle:{\"font-size\":\"4rem\"}})])]),_vm._v(\" \"),_c('el-col',{staticClass:\"WorkList-title\",attrs:{\"span\":19}},[_vm._v(\"\\n                \"+_vm._s(item.name)+\"\\n            \")]),_vm._v(\" \"),_c('el-col',{staticClass:\"WorkList-info\",attrs:{\"span\":24}},[_c('el-row',{attrs:{\"gutter\":30}},[_c('el-col',{attrs:{\"span\":12}},[_vm._v(\"类型: \"+_vm._s(item.wname))]),_vm._v(\" \"),_c('el-col',{staticStyle:{\"text-align\":\"right\"},attrs:{\"span\":12}},[_vm._v(_vm._s(_vm._f(\"stringreplace\")(item.createtime,'T',' ')))])],1)],1)],1)],1)})],2)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-614bee30\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/WorkList.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-614bee30\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./WorkList.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./WorkList.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./WorkList.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-614bee30\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./WorkList.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/WorkList.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}