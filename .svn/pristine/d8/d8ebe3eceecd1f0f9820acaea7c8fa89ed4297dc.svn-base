{"version":3,"sources":["webpack:///src/views/WorkItem.vue","webpack:///./src/views/WorkItem.vue?1f15","webpack:///./src/views/WorkItem.vue"],"names":["dictionary","__webpack_exports__","data","_ref","isFirstEnter","slider","sliderShow","loading","formIndex","selectForm","formList","activeName","__WEBPACK_IMPORTED_MODULE_1_babel_runtime_helpers_defineProperty___default","beforeRouteEnter","to","from","next","name","meta","isBack","activated","type","this","$route","params","$GetWxUserInfo","region","$GetSjUserInfo","$UserInfo","mobile","userId","$","hide","layer","alert","$wx","getAllPgeData","that","setTimeout","created","methods","getSelectFormUrl","item","url","iid","res_value","userid","input_index","rtid","wiid","Math","random","selectFormUrl","attr","getLxUrl","lxUrl","getLcUrl","lcUrl","MyGlobal","$MyGlobal","success","result","jsondata","JSON","parse","pageData","length","msg","e","$router","go","filter","fileList","error","res","console","log","GetDataWebServiceNJSJ","join","GetDataWebService","triggerForm","i","downFile","info","AjaxData","pageNum","PageMax","fileds","where","urlAfter","GetDataAjax","path","window","location","href","err","loading2","DoSubmit","push","SaveData","frames","contentWindow","postMessage","__WEBPACK_IMPORTED_MODULE_0_babel_runtime_core_js_json_stringify___default","SliderChange","val","SliderValue","views_WorkItem","render","_vm","_h","$createElement","_c","_self","directives","rawName","value","expression","modifiers","lock","staticClass","staticStyle","position","attrs","element-loading-text","element-loading-spinner","element-loading-background","width","margin","height","model","callback","$$v","label","top","left","z-index","_l","index","size","icon","circle","on","click","$event","_e","_v","display","border","-webkit-overflow-scrolling","overflow","/* 提示","id","onload","bottom","right","max","step","vertical","change","ref","show-overflow-tooltip","prop","scopedSlots","_u","key","fn","scope","word-break","word-wrap","row","color","margin-left","white-space","_s","text","text-align","span","staticRenderFns","__vue_styles__","ssrContext","__webpack_require__","Component","normalizeComponent","WorkItem"],"mappings":"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","file":"static/js/6.ccc0de16563efaa75fd1.js","sourcesContent":["<template>\r\n  <div class=\"viewbody\" v-loading.lock=\"loading\" element-loading-text=\"拼命加载中\" element-loading-spinner=\"el-icon-loading\" element-loading-background=\"rgba(0, 0, 0, 0.8)\"\r\n    style=\"position: relative;\">\r\n    <el-tabs v-model=\"activeName\" style=\"width: 96%;margin: 0 auto;position: relative;height: 92%;\">\r\n      <el-tab-pane label=\"公文表单\" name=\"first\">\r\n        <el-main class=\"my-tab-panel-content\">\r\n          <div class=\"my-tab-panel-body\">\r\n            <div style=\"position: absolute;top: 5px;left: 0px;z-index: 1;\">\r\n              <div v-if=\"formList&&formList.length>1\" v-for=\"(item,index) in formList\">\r\n                <el-button size=\"mini\" v-if=\"index==0\" icon=\"el-icon-caret-top\" circle @click=\"triggerForm(-1)\"></el-button>\r\n                <el-button size=\"mini\" v-if=\"index==1\" icon=\"el-icon-caret-bottom\" circle @click=\"triggerForm(+1)\"></el-button>\r\n              </div>\r\n            </div>\r\n            <iframe id=\"myformiframe\" style=\"width:100%;display: block;margin: 0 auto;border: none;height: 100%; -webkit-overflow-scrolling: touch; overflow: auto; \r\n            /* 提示: 请在此处加上需要设置的大小(dimensions)或位置(positioning)信息! */ \" onload=\"var data = {type:'slider',data: { SliderValue:0.5 }};window.frames['myformiframe'].contentWindow.postMessage(JSON.stringify(data), '*');\"></iframe>\r\n\r\n            <!-- 缩放条 -->\r\n            <div v-show=\"sliderShow\" style=\"position: absolute;top: 10px;bottom: 60px;right: 5px;z-index: 1;\">\r\n              <el-slider v-model=\"slider\" :max=\"1\" :step=\"0.01\" size=\"mini\" vertical style=\"height: 100%;\" @change=\"SliderChange\">\r\n              </el-slider>\r\n            </div>\r\n            <div style=\"position: absolute;bottom: 15px;right: 10px;z-index: 1;\">\r\n              <el-button type=\"primary\" size=\"mini\" icon=\"el-icon-setting\" circle @click=\"sliderShow=!sliderShow\"></el-button>\r\n            </div>\r\n          </div>\r\n        </el-main>\r\n      </el-tab-pane>\r\n      <el-tab-pane label=\"附件管理\" name=\"second\">\r\n        <el-table ref=\"fileList\" :data=\"fileList\" style=\"width: 100%;\" size=\"mini\">\r\n          <el-table-column show-overflow-tooltip prop=\"text\" label=\"附件名\">\r\n            <template slot-scope=\"scope\">\r\n              <div style=\"word-break:break-all;word-wrap:break-word;\" @click=\"downFile(scope.row)\">\r\n                <i class=\"el-icon-document\" style=\"color: goldenrod;\"></i>\r\n                <span style=\"margin-left: 10px;white-space: normal;\">{{ scope.row.text + scope.row.icon }}</span>\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </el-tab-pane>\r\n      <!-- <el-tab-pane label=\"查看流向\" name=\"fourth\">\r\n        <el-main class=\"my-tab-panel-content\">\r\n          <div class=\"my-tab-panel-body\">\r\n            <iframe :src=\"lxUrl\" style=\"width:100%;display: block;margin: 0 auto;border: none;height: 100%;\"></iframe>\r\n          </div>\r\n        </el-main>\r\n      </el-tab-pane> -->\r\n      <!-- <el-tab-pane label=\"进度视图\" name=\"third\">\r\n        <el-main class=\"my-tab-panel-content\">\r\n          <div class=\"my-tab-panel-body\">\r\n            <a>\r\n              <img :src=\"lcUrl\" style=\"width:100%;display: block;margin: 0 auto;border: none;height: 100%;\" />\r\n            </a>\r\n          </div>\r\n        </el-main>\r\n      </el-tab-pane> -->\r\n    </el-tabs>\r\n    <!--  -->\r\n    <div style=\"position: fixed;bottom: 5px;width: 100%;\">\r\n      <el-row style=\"text-align: center;\">\r\n        <el-col :span=\"24\">\r\n          <el-button-group id=\"handlebtnGroup\">\r\n            <el-button type=\"success\" size=\"small\" icon=\"el-icon-upload\" @click=\"SaveData\">保存</el-button>\r\n            <el-button type=\"primary\" size=\"small\" @click=\"DoSubmit\">\r\n              提交\r\n              <i class=\"el-icon-success el-icon--right\"></i>\r\n            </el-button>\r\n            <!-- <el-button type=\"warning\" size=\"small\">回退\r\n              <i class=\"el-icon-arrow-right el-icon--right\"></i>\r\n            </el-button> -->\r\n          </el-button-group>\r\n        </el-col>\r\n      </el-row>\r\n    </div>\r\n  </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\n  import sys_dictionary from '../dictionary'\r\n  let dictionary = sys_dictionary[\"dictionary\"];\r\n  export default {\r\n    data() {\r\n      return {\r\n        isFirstEnter: false, // 是否第一次进入，默认false\r\n        slider: 0.5,\r\n        sliderShow: false,\r\n\r\n        loading: false,\r\n        formIndex: 0,//当前显示表单索引\r\n        selectForm: {},//选中的form集合中的对象\r\n        formList: [],\r\n        activeName: \"first\",\r\n        loading: false,\r\n        pageData: [],\r\n        fileList: [],\r\n\r\n        selectFormUrl: \"\",\r\n        lxUrl: \"\",\r\n        lcUrl: \"\",\r\n      };\r\n    },\r\n    beforeRouteEnter(to, from, next) {\r\n      // 路由导航钩子，此时还不能获取组件实例 `this`，所以无法在data中定义变量（利用vm除外）\r\n      if (from.name == \"DoSubmit\") {\r\n        to.meta.isBack = true;\r\n        //判断是从哪个路由过来的，\r\n        //如果是page2过来的，表明当前页面不需要刷新获取新数据，直接用之前缓存的数据即可\r\n      }\r\n      next();\r\n    },\r\n    activated() {\r\n      var type = this.$route.params.type;\r\n      this.$GetWxUserInfo(this.$route);//获取用户信息\r\n      if (dictionary[type].region == \"sj\") {//如果为市局公文办理则获取时间用户表信息\r\n        this.$GetSjUserInfo(this.$UserInfo.mobile);\r\n      }\r\n      if (this.$UserInfo.userId == false) {\r\n        $(\"#app\").hide(0);\r\n        layer.alert(\"数据库中不存在当前用户信息、请咨询相关人员！\");\r\n\r\n        return false;\r\n      }\r\n      // 如果isBack是false，表明需要获取新数据，否则就不再请求，直接使用缓存的数据\r\n      if (!this.$route.meta.isBack || this.isFirstEnter) {\r\n        let wx = this.$wx;\r\n        this.activeName = \"first\";\r\n        /* if (typeof document.WeixinJSBridge == \"undefined\") {\r\n           document.addEventListener('WeixinJSBridgeReady', function onBridgeReady() {\r\n             // 通过下面这个API隐藏右上角按钮\r\n             WeixinJSBridge.call('hideOptionMenu');\r\n             // 通过下面这个API隐藏底部导航栏\r\n             WeixinJSBridge.call('hideToolbar');\r\n           });\r\n         }\r\n         else {\r\n           // 通过下面这个API隐藏右上角按钮\r\n           WeixinJSBridge.call('hideOptionMenu');\r\n           // 通过下面这个API隐藏底部导航栏\r\n           WeixinJSBridge.call('hideToolbar');\r\n         }\r\n \r\n         wx.ready(function () {\r\n           console.log(wx);\r\n           wx.hideOptionMenu();//隐藏微信右上角菜单\r\n         });\r\n         wx.error(function (a) {\r\n           console.log(\"error\");\r\n         });*/\r\n\r\n        this.getAllPgeData();\r\n      }\r\n\r\n      this.loading = true;\r\n      let that = this;\r\n      setTimeout(() => {\r\n        that.loading = false;\r\n      }, 4000);\r\n\r\n      // 恢复成默认的false，避免isBack一直是true，导致下次无法获取数据\r\n      this.$route.meta.isBack = false;\r\n      // 恢复成默认的false，避免isBack一直是true，导致每次都获取新数据\r\n      this.isFirstEnter = false;\r\n    },\r\n    created() {\r\n      this.slider = 0.5;\r\n      this.isFirstEnter = true;\r\n    },\r\n    methods: {\r\n      getSelectFormUrl: function () {//表单url路径拼接\r\n        var item = this.selectForm;\r\n        if (this.$route.params.type == \"gwbl\") {\r\n          var url = \"http://218.94.36.101:8888/JnfjWebService/HtmlPage/HtmlMainPage.aspx?iid=\" + item.iid + \"&FormName=\" + item.res_value + \"&UserId=\" + item.userid + \"&input_index=\" + item.input_index + \"&rtid=\" + item.rtid + \"&wiid=\" + item.wiid + \"&indexfield=iid&indexvalue=\" + item.iid + \"&t=\" + Math.random();\r\n          this.selectFormUrl = url;\r\n        }\r\n        else {\r\n          var url = \"http://218.94.36.101:8888/netows2_jjg/HtmlPage/HtmlMainPage.aspx?iid=\" + item.iid + \"&FormName=\" + item.res_value + \"&UserId=\" + item.userid + \"&input_index=\" + item.input_index + \"&rtid=\" + item.rtid + \"&wiid=\" + item.wiid + \"&indexfield=iid&indexvalue=\" + item.iid + \"&t=\" + Math.random();\r\n          this.selectFormUrl = url;\r\n        }\r\n\r\n        if ($(\"#myformiframe\").attr(\"src\") != this.selectFormUrl) {\r\n          $(\"#myformiframe\").attr(\"src\", this.selectFormUrl);\r\n        }\r\n      },\r\n      getLxUrl: function () {//流向url路径拼接\r\n        var iid = this.$route.params.iid;\r\n        if (this.$route.params.type == \"gwbl\") {\r\n          var url = \"http://218.94.36.101:8888/JnfjWebService/UserApplication/workflow/WorkItemDetails.aspx?iid=\" + iid;\r\n          this.lxUrl = url;\r\n        }\r\n      },\r\n      getLcUrl: function () {//流程url路径拼接\r\n        var iid = this.$route.params.iid;\r\n        if (this.$route.params.type == \"gwbl\") {\r\n          var url = \"http://218.94.36.101:8888/JnfjWebService/htmlpage/ViewWorkflowProcess.aspx?iid=\" + iid + \"&sctlid=&ectlid=\";\r\n          this.lcUrl = url;\r\n        }\r\n        else {\r\n          var url = \"http://218.94.36.101:8888/netows2_jjg/htmlpage/ViewWorkflowProcess.aspx?iid=\" + iid + \"&sctlid=&ectlid=\";\r\n          this.lcUrl = url;\r\n        }\r\n      },\r\n      getAllPgeData: function () {  //获取当前页面所有相关数据\r\n        //var jsonstr = '[{\"rtid\":\"110bcdb3-51ad-441e-96f0-03e9c8bb7b55\",\"type\":\"3\",\"res_value\":\"c90ce1ad-a5dd-41be-abb6-d1a2c5134060\",\"path\":\"市国土局文件传阅单\",\"input_index\":\"0\",\"orderno\":\"1\",\"sort\":\"1\",\"wiid\":\"3981856\",\"userid\":\"81c5e30c-0791-4125-9f81-aa942e1e72e1\",\"text\":\"市国土局文件传阅单\",\"step\":\"机要室整理\",\"stepctlid\":\"e0cbc7ff-dcf3-494a-8724-4922ccb248c4\",\"icon\":\".page\",\"iid\":\"362119\",\"wid\":\"68b04fd8-a811-4c68-878d-512de1032afa\",\"fsort\":\"1\",\"scount\":\"\",\"writeflag\":\"\"},{\"rtid\":\"\",\"type\":\"2\",\"res_value\":\"4616056178934c24992b923c0a62ebf0\",\"path\":\"第二次问卷员工版v2.1\",\"input_index\":\"0\",\"orderno\":\"1\",\"sort\":\"101\",\"wiid\":\"3981856\",\"userid\":\"81c5e30c-0791-4125-9f81-aa942e1e72e1\",\"text\":\"第二次问卷员工版v2.1\",\"step\":\"机要室整理\",\"stepctlid\":\"e0cbc7ff-dcf3-494a-8724-4922ccb248c4\",\"icon\":\".docx\",\"iid\":\"362119\",\"wid\":\"68b04fd8-a811-4c68-878d-512de1032afa\",\"fsort\":\"2\",\"scount\":\"\",\"writeflag\":\"\"}]';\r\n        //var jsondata = JSON.parse(jsonstr);\r\n        //this.pageData = jsondata;\r\n\r\n        let MyGlobal = this.$MyGlobal;\r\n        let that = this;\r\n\r\n        that.loading = true;\r\n\r\n        //获取数据成功回调\r\n        var success = function (result) {\r\n          var jsondata = JSON.parse(result);\r\n          that.pageData = jsondata;\r\n          if (jsondata.length <= 0) {\r\n            layer.msg(\"该案件存在异常！\", function (e) {\r\n              that.$router.go(-1);\r\n            });\r\n\r\n            return false;\r\n          }\r\n\r\n          //表单类型\r\n          that.formList = jsondata.filter(function (item) {\r\n            return item.type == \"3\";\r\n          });\r\n          //附件类型\r\n          that.fileList = jsondata.filter(function (item) {\r\n            return item.type == \"2\";\r\n          });\r\n\r\n          that.selectForm = that.formList[0];//默认进入第一个表单\r\n\r\n          that.getSelectFormUrl();\r\n          that.getLcUrl();\r\n          that.getLxUrl();\r\n        };\r\n        //获取数据失败回调\r\n        var error = function (res) {\r\n          console.log(res);\r\n          that.loading = false;\r\n        };\r\n        //参数\r\n        var userId = that.$UserInfo.userId;\r\n        var wiid = that.$route.params.wiid;\r\n        var params = [userId, wiid, \"order by sort;text\"];\r\n        //获取当前页面需要所有信息数据\r\n        var type = that.$route.params.type;\r\n        if (type == \"sjgwbl\") {\r\n          MyGlobal.GetDataWebServiceNJSJ(\"NetOffice.DoWorkHandle\", \"GetResourceTree\", params.join(\",\"), success, error);\r\n        }\r\n        else {\r\n          MyGlobal.GetDataWebService(\"NetOffice.DoWorkHandle\", \"GetResourceTree\", params.join(\",\"), success, error);\r\n        }\r\n\r\n\r\n      },\r\n      triggerForm(i) {\r\n        console.log(this.formIndex);\r\n        if (this.formIndex + i >= 0 && this.formIndex + i < this.formList.length) {\r\n          this.formIndex += i;\r\n          this.selectForm = this.formList[this.formIndex];\r\n          this.slider = 0.5;\r\n          this.getSelectFormUrl();\r\n        }\r\n      },\r\n      downFile(info) {\r\n        let MyGlobal = this.$MyGlobal;\r\n        let that = this;\r\n\r\n        var res_value = info.res_value;\r\n        var AjaxData = {\r\n          type: [\"attachment a\", \"dynamic_resource b\"],\r\n          pageNum: 1,\r\n          PageMax: 1,\r\n          fileds: \"replace(substr(a.ftp_path,instr(a.ftp_path,'@',1,2)+1),'\\\\','/') as path\",\r\n          where: \"a.aid=b.res_value and b.res_value='\" + res_value + \"'\",\r\n        };\r\n\r\n        var urlAfter = AjaxData.type.join(\",\");\r\n        var success = function (result) {\r\n          if (result.length > 0) {\r\n            var path = \"http://218.94.36.101:8888/weixinpage/ftpfile/\" + result[0][\"path\"];\r\n            window.location.href = path;\r\n          }\r\n          else {\r\n            layer.msg(\"找不到文件！\");\r\n          }\r\n        };\r\n        var error = function (err) {\r\n          that.loading2 = false;\r\n          layer.alert(\"下载附件时发生异常！\");\r\n        }\r\n\r\n        MyGlobal.GetDataAjax(\"get\", urlAfter, AjaxData, success, error);\r\n      },\r\n      DoSubmit() {\r\n        var iid = this.$route.params.iid;\r\n        var wiid = this.$route.params.wiid;\r\n        var type = this.$route.params.type;\r\n        this.$router.push({\r\n          name: \"DoSubmit\",\r\n          params: { type: type, iid: iid, wiid: wiid }\r\n        });\r\n      },\r\n      SaveData() {\r\n        var data = {\r\n          type: \"saveform\"\r\n        };\r\n        window.frames['myformiframe'].contentWindow.postMessage(JSON.stringify(data), '*');\r\n      },\r\n      SliderChange(val) { //刻度尺跳转、页面缩放比例\r\n        var data = {\r\n          type: \"slider\",\r\n          data: {\r\n            SliderValue: val\r\n          }\r\n        };\r\n        window.frames['myformiframe'].contentWindow.postMessage(JSON.stringify(data), '*');\r\n      }\r\n    }\r\n  };\r\n</script>\r\n\r\n<style>\r\n  #app>div>.el-tabs.el-tabs--top>.el-tabs__content {\r\n    position: absolute !important;\r\n    top: 42px !important;\r\n    bottom: 0 !important;\r\n    left: 0 !important;\r\n    width: 100%;\r\n  }\r\n\r\n  #app>div>.el-tabs.el-tabs--top>.el-tabs__content>.el-tab-pane {\r\n    height: 100% !important;\r\n    overflow: auto;\r\n  }\r\n\r\n  #app>div>.el-tabs.el-tabs--top>.el-tabs__content>.el-tab-pane>.my-tab-panel-content {\r\n    height: 100% !important;\r\n    padding: 0px 0px 0px 5px !important;\r\n  }\r\n\r\n  #app>div>.el-tabs.el-tabs--top>.el-tabs__content>.el-tab-pane>.my-tab-panel-content>.my-tab-panel-body {\r\n    position: relative !important;\r\n    height: 100% !important;\r\n  }\r\n\r\n  #dosubmitPanel {\r\n    font-size: 1.2rem\r\n  }\r\n\r\n  #dosubmitPanel .el-radio-button--mini .el-radio-button__inner {\r\n    width: 70px;\r\n    overflow: hidden;\r\n  }\r\n\r\n  #handlebtnGroup {\r\n    display: block;\r\n    width: 100%;\r\n  }\r\n\r\n  #handlebtnGroup>button.el-button {\r\n    width: 50% !important;\r\n    display: inline-block;\r\n  }\r\n</style>\n\n\n// WEBPACK FOOTER //\n// src/views/WorkItem.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{directives:[{name:\"loading\",rawName:\"v-loading.lock\",value:(_vm.loading),expression:\"loading\",modifiers:{\"lock\":true}}],staticClass:\"viewbody\",staticStyle:{\"position\":\"relative\"},attrs:{\"element-loading-text\":\"拼命加载中\",\"element-loading-spinner\":\"el-icon-loading\",\"element-loading-background\":\"rgba(0, 0, 0, 0.8)\"}},[_c('el-tabs',{staticStyle:{\"width\":\"96%\",\"margin\":\"0 auto\",\"position\":\"relative\",\"height\":\"92%\"},model:{value:(_vm.activeName),callback:function ($$v) {_vm.activeName=$$v},expression:\"activeName\"}},[_c('el-tab-pane',{attrs:{\"label\":\"公文表单\",\"name\":\"first\"}},[_c('el-main',{staticClass:\"my-tab-panel-content\"},[_c('div',{staticClass:\"my-tab-panel-body\"},[_c('div',{staticStyle:{\"position\":\"absolute\",\"top\":\"5px\",\"left\":\"0px\",\"z-index\":\"1\"}},_vm._l((_vm.formList),function(item,index){return (_vm.formList&&_vm.formList.length>1)?_c('div',[(index==0)?_c('el-button',{attrs:{\"size\":\"mini\",\"icon\":\"el-icon-caret-top\",\"circle\":\"\"},on:{\"click\":function($event){_vm.triggerForm(-1)}}}):_vm._e(),_vm._v(\" \"),(index==1)?_c('el-button',{attrs:{\"size\":\"mini\",\"icon\":\"el-icon-caret-bottom\",\"circle\":\"\"},on:{\"click\":function($event){_vm.triggerForm(+1)}}}):_vm._e()],1):_vm._e()})),_vm._v(\" \"),_c('iframe',{staticStyle:{\"width\":\"100%\",\"display\":\"block\",\"margin\":\"0 auto\",\"border\":\"none\",\"height\":\"100%\",\"-webkit-overflow-scrolling\":\"touch\",\"overflow\":\"auto\",\"/* 提示\":\"请在此处加上需要设置的大小(dimensions)或位置(positioning)信息! */\"},attrs:{\"id\":\"myformiframe\",\"onload\":\"var data = {type:'slider',data: { SliderValue:0.5 }};window.frames['myformiframe'].contentWindow.postMessage(JSON.stringify(data), '*');\"}}),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.sliderShow),expression:\"sliderShow\"}],staticStyle:{\"position\":\"absolute\",\"top\":\"10px\",\"bottom\":\"60px\",\"right\":\"5px\",\"z-index\":\"1\"}},[_c('el-slider',{staticStyle:{\"height\":\"100%\"},attrs:{\"max\":1,\"step\":0.01,\"size\":\"mini\",\"vertical\":\"\"},on:{\"change\":_vm.SliderChange},model:{value:(_vm.slider),callback:function ($$v) {_vm.slider=$$v},expression:\"slider\"}})],1),_vm._v(\" \"),_c('div',{staticStyle:{\"position\":\"absolute\",\"bottom\":\"15px\",\"right\":\"10px\",\"z-index\":\"1\"}},[_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\",\"icon\":\"el-icon-setting\",\"circle\":\"\"},on:{\"click\":function($event){_vm.sliderShow=!_vm.sliderShow}}})],1)])])],1),_vm._v(\" \"),_c('el-tab-pane',{attrs:{\"label\":\"附件管理\",\"name\":\"second\"}},[_c('el-table',{ref:\"fileList\",staticStyle:{\"width\":\"100%\"},attrs:{\"data\":_vm.fileList,\"size\":\"mini\"}},[_c('el-table-column',{attrs:{\"show-overflow-tooltip\":\"\",\"prop\":\"text\",\"label\":\"附件名\"},scopedSlots:_vm._u([{key:\"default\",fn:function(scope){return [_c('div',{staticStyle:{\"word-break\":\"break-all\",\"word-wrap\":\"break-word\"},on:{\"click\":function($event){_vm.downFile(scope.row)}}},[_c('i',{staticClass:\"el-icon-document\",staticStyle:{\"color\":\"goldenrod\"}}),_vm._v(\" \"),_c('span',{staticStyle:{\"margin-left\":\"10px\",\"white-space\":\"normal\"}},[_vm._v(_vm._s(scope.row.text + scope.row.icon))])])]}}])})],1)],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"position\":\"fixed\",\"bottom\":\"5px\",\"width\":\"100%\"}},[_c('el-row',{staticStyle:{\"text-align\":\"center\"}},[_c('el-col',{attrs:{\"span\":24}},[_c('el-button-group',{attrs:{\"id\":\"handlebtnGroup\"}},[_c('el-button',{attrs:{\"type\":\"success\",\"size\":\"small\",\"icon\":\"el-icon-upload\"},on:{\"click\":_vm.SaveData}},[_vm._v(\"保存\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"small\"},on:{\"click\":_vm.DoSubmit}},[_vm._v(\"\\n            提交\\n            \"),_c('i',{staticClass:\"el-icon-success el-icon--right\"})])],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-fa084b4a\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/WorkItem.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-fa084b4a\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./WorkItem.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./WorkItem.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./WorkItem.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-fa084b4a\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./WorkItem.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/WorkItem.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}